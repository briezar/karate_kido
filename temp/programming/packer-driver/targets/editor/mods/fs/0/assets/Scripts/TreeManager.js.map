{"version":3,"sources":["file:///D:/Cocos/Projects/TreeChopper/assets/Scripts/TreeManager.ts"],"names":["_decorator","Component","Prefab","instantiate","Vec3","UITransform","tween","SpriteFrame","GameController","SoundManager","TreeBlock","ccclass","property","TreeManager","type","onLoad","populateStartingTrees","update","deltaTime","treeArray","node","position","y","treeHeight","setPosition","dropSpeed","i","length","timeSinceLastChop","chopTree","playerMovement","scale","x","getStickSide","knockAway","Instance","lose","increaseMultiplier","score","playWoodChopSound","addTimerTime","difficultyScale","lastPosition","addScore","checkForBuff","isChopped","choppedTree","shift","by","onUpdate","uiOpacity","opacity","easing","call","reset","start","knockDown","treeBlock","buffType","playBuffAnimation","console","log","setTimerTimeScale","children","getComponent","treeManager","height","push","treeBlockPrefab","setParent","setupNextTree","tree","setup","setupScaleWithTreeCounter","treeCounter","setDifficultyScale","Math","min","random","isLastBlockNot1x","setup1x","setup2x","setup3x","setup4x","hitStates4x","stick4x","lantern","hitStates3x","stick3x","hitStates2x","stick2x"],"mappings":"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","sourcesContent":["\nimport { _decorator, Component, Node, Prefab, instantiate, Vec3, RigidBody2D, Vec2, game, director, UITransform, clamp, tween, easing, random, SpriteFrame } from 'cc';\nimport { GameController } from './GameController';\nimport { PlayerMovement } from './PlayerMovement';\nimport { SoundManager } from './SoundManager';\nimport { TreeBlock } from './TreeBlock';\r\nconst { ccclass, property } = _decorator;\n\n/**\n * Predefined variables\n * Name = TreeManager\n * DateTime = Thu Feb 10 2022 23:14:06 GMT+0700 (Indochina Time)\n * Author = briezar\n * FileBasename = TreeManager.ts\n * FileBasenameNoExtension = TreeManager\n * URL = db://assets/TreeManager.ts\n * ManualUrl = https://docs.cocos.com/creator/3.4/manual/en/\n *\n */\n\n@ccclass('TreeManager')\nexport class TreeManager extends Component {\n    @property({ type: Prefab }) public treeBlockPrefab: Prefab;\n\n    @property({ type: SpriteFrame }) public hitStates2x: SpriteFrame[] = [];\n    @property({ type: SpriteFrame }) public hitStates3x: SpriteFrame[] = [];\n    @property({ type: SpriteFrame }) public hitStates4x: SpriteFrame[] = [];\n\n    @property({ type: SpriteFrame }) public stick2x: SpriteFrame[] = [];\n    @property({ type: SpriteFrame }) public stick3x: SpriteFrame[] = [];\n    @property({ type: SpriteFrame }) public stick4x: SpriteFrame[] = [];\n\n    @property({ type: SpriteFrame }) public lantern: SpriteFrame[] = [];\n\n    playerMovement: PlayerMovement;\n\n    treeArray: TreeBlock[] = [];\n\n    treeHeight: number;\n    dropSpeed: number = 1000;\n\n    lastPosition: number = -1;\n    timeSinceLastChop: number = 0;\n\n    treeCounter = 0;\n    noStickCounter = 0;\n    isLastBlockNot1x: boolean = false;\n\n    onLoad() {\n        this.populateStartingTrees();\n    }\n\n    update(deltaTime: number) {\n\n        //Move to position when chop fast\n        if (this.treeArray[0].node.position.y > this.treeHeight) {\n            this.treeArray[0].node.setPosition(0, this.treeHeight, 0);\n        }\n\n        //Move first block\n        if (this.treeArray[0].node.position.y > 0.01) {\n            this.treeArray[0].node.setPosition(0, this.treeArray[0].node.position.y - this.dropSpeed * deltaTime, 0);\n        }\n        else if (this.treeArray[0].node.position.y < 0.01) {\n            this.treeArray[0].node.setPosition(0, 0, 0);\n        }\n\n        //Next block sticks to previous block\n        for (var i = 1; i < this.treeArray.length; i++) {\n            this.treeArray[i].node.setPosition(0, this.treeArray[i - 1].node.position.y + this.treeHeight, 0);\n        }\n\n        this.timeSinceLastChop += deltaTime;\n    }\n\n    chopTree() {\n        if (this.playerMovement.node.scale.x == this.treeArray[0].getStickSide()) {\n            this.playerMovement.knockAway();\n            GameController.Instance.lose();\n            return;\n        }\n\n        GameController.Instance.increaseMultiplier(0.15);\n\n        let score: number = 10;\n        SoundManager.Instance.playWoodChopSound();\n\n        GameController.Instance.addTimerTime(0.5 / GameController.Instance.difficultyScale);\n\n        let position = this.playerMovement.node.scale.x;\n        if (position != this.lastPosition) {\n            score += 2;\n            if (this.timeSinceLastChop < 0.5) {\n                score += 3;\n            }\n        }\n        if (this.timeSinceLastChop < 0.2) score += 5;\n\n        GameController.Instance.addScore(score);\n        this.checkForBuff(this.treeArray[1]);\n\n        if (!this.treeArray[0].isChopped()) {\r\n            return;\r\n        }\n\n        var choppedTree = this.treeArray.shift();\n\n        tween(choppedTree.node).by(0.5, { position: new Vec3(this.playerMovement.node.scale.x * -300, 0) },\n            {\n                onUpdate: () => {\n                    choppedTree.uiOpacity.opacity -= 10;\n                },\n                easing: 'quartOut'\r\n            })\n            .call(() => {\n                choppedTree.reset();\n            }).start();\n\n        this.checkForBuff(this.treeArray[1]);\n\n        this.lastPosition = this.playerMovement.node.scale.x;\n        this.timeSinceLastChop = 0;\n\n        if (this.playerMovement.node.scale.x == this.treeArray[0].getStickSide()) {\n            this.playerMovement.knockDown();\n            GameController.Instance.lose();\n        }\n    }\n\n    checkForBuff(treeBlock: TreeBlock) {\r\n        if (this.playerMovement.node.scale.x != treeBlock.getStickSide()) {\r\n            return;\r\n        }\r\n        switch (treeBlock.buffType) {\r\n            case 0:\r\n\r\n                break;\r\n            case 1:\r\n                treeBlock.playBuffAnimation();\r\n                GameController.Instance.addTimerTime(3);\r\n                console.log(\"Add time: 3\");\r\n                break;\r\n            case 2:\r\n                treeBlock.playBuffAnimation();\r\n                GameController.Instance.setTimerTimeScale(0.5, 3);\r\n                break;\r\n            default:\r\n        }\r\n    }\n\n    populateStartingTrees() {\n        this.treeArray[0] = this.node.children[0].getComponent(TreeBlock);\n        this.treeArray[0].treeManager = this;\n        this.treeHeight = this.treeArray[0].getComponent(UITransform).height;\n\n        this.treeArray.push(instantiate(this.treeBlockPrefab).getComponent(TreeBlock));\n        this.treeArray[1].treeManager = this;\n        this.treeArray[1].node.setParent(this.node);\n        this.treeArray[1].node.setPosition(0, this.treeHeight * this.treeArray.length, 0);\n\n        for (var i = 2; i < 20; i++) {\n            this.treeArray.push(instantiate(this.treeBlockPrefab).getComponent(TreeBlock));\n            this.treeArray[i].treeManager = this;\n            this.treeArray[i].node.setParent(this.node);\n            this.setupNextTree();\n\n        }\n\n    }\n\n    setupNextTree() {\n        var tree = this.treeArray[this.treeArray.length - 1];\n        if (this.treeArray[this.treeArray.length - 2].getStickSide() != 0) { //if tree below has stick\n            tree.setup();\n        }\n        else {\n            tree.setup(1, 'random');\n        }\n\n        tree.node.setPosition(0, this.treeHeight * this.treeArray.length, 0);\n    }\n\n    setupScaleWithTreeCounter() {\n        this.treeCounter++;\n        GameController.Instance.setDifficultyScale(Math.min(1.7, 1 + this.treeCounter / 100));\n\n        var tree = this.treeArray[this.treeArray.length - 1];\n        tree.node.setPosition(0, this.treeHeight * this.treeArray.length, 0);\n\n        let random = Math.random();\n\n        if (random < 0.90 || this.isLastBlockNot1x) {\r\n            this.setup1x();\r\n            this.isLastBlockNot1x = false;\r\n        }\n        else if (random < 0.95) {\n            this.setup2x();\r\n        }\n        else if (random < 0.98) {\n            this.setup3x();\r\n        }\n        else {\n            this.setup4x();\r\n        }\n\n    }\n\n    setup4x() {\n        let tree = this.treeArray[this.treeArray.length - 1];\n        tree.setup(4, 'random', this.hitStates4x, this.stick4x, 'random', this.lantern);\r\n        this.isLastBlockNot1x = true;\r\n    }\n\n    setup3x() {\n        let tree = this.treeArray[this.treeArray.length - 1];\n        tree.setup(3, 'random', this.hitStates3x, this.stick3x, 'random', this.lantern);\r\n        this.isLastBlockNot1x = true;\r\n    }\n\n    setup2x() {\n        let tree = this.treeArray[this.treeArray.length - 1];\n        tree.setup(2, 'random', this.hitStates2x, this.stick2x, 'random', this.lantern);\r\n        this.isLastBlockNot1x = true;\r\n    }\n\n    setup1x() {\n        let tree = this.treeArray[this.treeArray.length - 1];\n        tree.setup(1, 'random', [], [], 'random', this.lantern);\r\n    }\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.4/manual/en/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.4/manual/en/scripting/ccclass.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.4/manual/en/scripting/life-cycle-callbacks.html\n */\n"]}